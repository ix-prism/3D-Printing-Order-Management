# ????

?????????????????????????????

## ??

????????????????Electron??????????????????????????????

## ????

- ????Electron
- ???Vite + TypeScript?Vanilla?
- ??????????????? + JSON?
- ?????`npm run electron:dev`

## ????

- `electron/main.cjs`
  - ?????IPC ???????????????????
- `electron/preload.cjs`
  - ?? `contextBridge` ???? IPC API
- `src/main.ts`
  - ???????????????
- `src/app/`
  - `api.ts`?Renderer ? IPC ????
  - `constants.ts`????????????
  - `state.ts`?????????????????????
  - `utils.ts`?????????????????????
  - `orders.ts`????????????
  - `pending.ts`????????????
  - `preview.ts`??????? DOM ??
  - `drag.ts`??????????/DownloadURL?
  - `render.ts`???????
  - `handlers.ts`??????????
  - `init.ts`???????

## ???????

### ?????

- ????????????????? `settings.json`?
- ?????`%APPDATA%/<???>/settings.json`?Electron `app.getPath("userData")`?

### ??????

```
YYMMDD_??_??_???
```

- `YYMMDD`?????
- `???`?????????4 ????
- ????????????

### ??????

```
????/
  order.json
  ????1.stl
  ????2.step
  ????1.stl.preview.png
```

- `order.json`??????
- `*.preview.png`??????

## ??????????

???
- `dirName`?`orderNo`?`datePrefix`
- ??/??/??/??/??/??/??
- `folderNote`??????
- `shippingInfo`??????
- `files[]`??????

???
- `name` ?????
- `savedAs` ????????????
- `note` ????
- `previewImage` ??????
- `printQty` / `printedQty`
- `addedAt` ????

## IPC ?????????

?????? `window.electronAPI` ???

- ??/??
  - `getSettings` / `chooseBaseDir` / `setBaseDir`
- ??
  - `listOrders` / `createOrder` / `updateOrder` / `updateOrderNote`
  - `copyOrder` / `deleteOrder`
- ??
  - `selectFiles` / `addFiles` / `replaceFile` / `deleteFile`
  - `updateFileNote` / `updateFileQuantities`
  - `savePreviewImage` / `deletePreviewImage`
  - `getClipboardImage`
- ??
  - `startDragFile`

## ????

- ???`initApp` -> ???? -> ???????? -> `refreshOrders` -> ????
- ??????????? -> ?????? -> ?? `order.json` -> ?????
- ????????? -> `savePreviewImage` -> ????? DOM

## ????

- ?????native?
  - ? `dragstart` ? `preventDefault()`
  - ?? IPC ?? `webContents.startDrag` ?????????
- DownloadURL????
  - ? `dragstart` ??? `text/plain` / `text/uri-list` / `DownloadURL`
  - ?? Chromium ???????????????????
- Bambu Studio ??? `stl/obj/3mf/stp/step`???????????????????????

## ??

- ????????????????
- ???????????????
